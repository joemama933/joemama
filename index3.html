<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CropCare - Smart Farming Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #2E7D32;
            --secondary-color: #4CAF50;
            --accent-color: #66BB6A;
            --danger-color: #f44336;
            --warning-color: #ff9800;
            --success-color: #4caf50;
            --info-color: #2196f3;
            --light-bg: #f8f9fa;
            --dark-text: #333;
            --border-color: #e0e0e0;
        }

        body {
            background: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo span {
            margin-right: 10px;
            font-size: 2rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .weather-widget {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .language-switcher select {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 15px;
        }

        /* Main Container */
        .main-container {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid var(--border-color);
            padding: 2rem 1rem;
            position: fixed;
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--dark-text);
            text-decoration: none;
        }

        .nav-item:hover {
            background: var(--light-bg);
            color: var(--primary-color);
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-item i {
            margin-right: 12px;
            font-size: 1.2rem;
            width: 20px;
        }

        /* Content Area */
        .content-area {
            margin-left: 280px;
            padding: 2rem;
            flex: 1;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .card-icon {
            font-size: 1.5rem;
            padding: 8px;
            border-radius: 10px;
            background: var(--light-bg);
        }

        /* Weather Card */
        .weather-card {
            background: linear-gradient(135deg, #87CEEB, #4682B4);
            color: white;
        }

        .weather-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .temperature {
            font-size: 3rem;
            font-weight: bold;
        }

        .weather-details {
            text-align: right;
        }

        /* Crop Status */
        .crop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .crop-item:last-child {
            border-bottom: none;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-healthy { background: #e8f5e8; color: #2e7d32; }
        .status-warning { background: #fff3e0; color: #f57c00; }
        .status-danger { background: #ffebee; color: #d32f2f; }

        /* AI Chat Interface */
        .chat-container {
            height: 400px;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #fafafa;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            animation: fadeIn 0.3s ease-in;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 0.9rem;
        }

        .message.bot .message-content {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 18px 18px 18px 4px;
        }

        .message.user .message-content {
            background: var(--primary-color);
            color: white;
            border-radius: 18px 18px 4px 18px;
        }

        .chat-input-area {
            display: flex;
            padding: 1rem;
            background: white;
            border-top: 1px solid var(--border-color);
        }

        .chat-input {
            flex: 1;
            padding: 12px 18px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .chat-send-btn, .voice-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 5px;
            transition: all 0.3s;
        }

        .chat-send-btn {
            background: var(--primary-color);
            color: white;
        }

        .voice-btn {
            background: var(--warning-color);
            color: white;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .quick-action-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Image Upload Area */
        .image-upload {
            border: 2px dashed var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-upload:hover {
            border-color: var(--primary-color);
            background: var(--light-bg);
        }

        .image-upload.dragover {
            border-color: var(--primary-color);
            background: rgba(76, 175, 80, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--border-color);
            margin-bottom: 1rem;
        }

        /* Government Schemes */
        .scheme-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: var(--light-bg);
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }

        .scheme-icon {
            font-size: 2rem;
            margin-right: 15px;
            color: var(--primary-color);
        }

        .scheme-details h4 {
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .scheme-amount {
            font-weight: bold;
            color: var(--success-color);
        }

        /* Market Prices */
        .price-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .price-trend {
            display: flex;
            align-items: center;
            font-weight: bold;
            gap: 5px;
        }

        .trend-up { color: var(--success-color); }
        .trend-down { color: var(--danger-color); }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0;
                padding: 1rem;
            }

            .header-content {
                padding: 0 1rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }

        /* Hide mobile menu button on desktop */
        .mobile-menu-btn {
            display: none;
        }

        /* Section Visibility */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* NEW STYLES FOR IMPROVED SECTIONS */
        
        /* Crop Advisory Improvements */
        .crop-calendar {
            margin-top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        
        .calendar-nav-btn {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            background: #f9f9f9;
            min-height: 60px;
        }
        
        .calendar-day.header {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.today {
            background: var(--accent-color);
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.has-task {
            background: #fff3e0;
            border: 1px solid var(--warning-color);
        }
        
        .task-list {
            margin-top: 20px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 8px 0;
            background: var(--light-bg);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .task-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        /* Profile Section Improvements */
        .profile-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .profile-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-secondary {
            background: var(--light-bg);
            color: var(--dark-text);
            border: 1px solid var(--border-color);
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        .profile-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .farm-map {
            margin-top: 20px;
            height: 200px;
            background: #e8f5e9;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .field-marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transform: translate(-50%, -50%);
        }
        
        .field-info {
            position: absolute;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
            z-index: 10;
            max-width: 200px;
        }
        
        .field-marker:hover + .field-info {
            display: block;
        }
        
        .crop-details {
            margin-top: 20px;
        }
        
        .detail-card {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button class="mobile-menu-btn" onclick="toggleMobileSidebar()">‚ò∞</button>
            <div class="logo">
                <span>üå±</span>
                <span>CropCare</span>
            </div>
            <div class="user-info">
                <div class="weather-widget" id="headerWeather">
                    üìç Punjab ‚Ä¢ 24¬∞C ‚òÄÔ∏è
                </div>
                <select class="language-switcher" onchange="changeLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                    <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
                    <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                </select>
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="nav-item active" onclick="showSection('dashboard')">
                <i>üè†</i> Dashboard
            </div>
            <div class="nav-item" onclick="showSection('chat')">
                <i>ü§ñ</i> AI Assistant
            </div>
            <div class="nav-item" onclick="showSection('crops')">
                <i>üåæ</i> Crop Advisory
            </div>
            <div class="nav-item" onclick="showSection('diseases')">
                <i>üîç</i> Disease Scanner
            </div>
            <div class="nav-item" onclick="showSection('weather')">
                <i>üå¶Ô∏è</i> Weather
            </div>
            <div class="nav-item" onclick="showSection('market')">
                <i>üí∞</i> Market Prices
            </div>
            <div class="nav-item" onclick="showSection('schemes')">
                <i>üèõÔ∏è</i> Govt Schemes
            </div>
            <div class="nav-item" onclick="showSection('profile')">
                <i>üë§</i> My Profile
            </div>
        </nav>

        <!-- Content Area -->
        <main class="content-area">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">Welcome back, Ram Singh! üôè</h2>
                
                <div class="dashboard-grid">
                    <!-- Weather Card -->
                    <div class="card weather-card">
                        <div class="card-header">
                            <h3>Today's Weather</h3>
                            <span>üìç Ludhiana, Punjab</span>
                        </div>
                        <div class="weather-info">
                            <div>
                                <div class="temperature">24¬∞</div>
                                <div>Partly Cloudy</div>
                            </div>
                            <div class="weather-details">
                                <div>üí® Wind: 12 km/h</div>
                                <div>üíß Humidity: 65%</div>
                                <div>üåßÔ∏è Rain: 20%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Status -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Crop Status</h3>
                            <span class="card-icon">üåæ</span>
                        </div>
                        <div class="crop-item">
                            <div>
                                <strong>Wheat (5 acres)</strong>
                                <br><small>Flowering stage</small>
                            </div>
                            <span class="status-badge status-healthy">Healthy</span>
                        </div>
                        <div class="crop-item">
                            <div>
                                <strong>Rice (3 acres)</strong>
                                <br><small>Vegetative stage</small>
                            </div>
                            <span class="status-badge status-warning">Monitor</span>
                        </div>
                        <div class="crop-item">
                            <div>
                                <strong>Cotton (2 acres)</strong>
                                <br><small>Maturity stage</small>
                            </div>
                            <span class="status-badge status-danger">Disease Alert</span>
                        </div>
                    </div>

                    <!-- Quick AI Chat -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Quick Chat</h3>
                            <span class="card-icon">üí¨</span>
                        </div>
                        <div class="quick-actions">
                            <button class="quick-action-btn" onclick="quickChat('weather')">Weather Alert</button>
                            <button class="quick-action-btn" onclick="quickChat('fertilizer')">Fertilizer Guide</button>
                            <button class="quick-action-btn" onclick="quickChat('market')">Market Price</button>
                        </div>
                        <div class="chat-container" style="height: 200px;">
                            <div class="chat-messages" id="dashboardChat">
                                <div class="message bot">
                                    <div class="message-content">
                                        Hello Ram Singh! How can I help you today? üåæ
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Market Prices -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Market Prices</h3>
                            <span class="card-icon">üìà</span>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Wheat</strong>
                                <br><small>Per quintal</small>
                            </div>
                            <div class="price-trend trend-up">
                                ‚Çπ2,150 ‚ÜóÔ∏è
                            </div>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Rice</strong>
                                <br><small>Per quintal</small>
                            </div>
                            <div class="price-trend trend-down">
                                ‚Çπ3,200 ‚ÜòÔ∏è
                            </div>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Cotton</strong>
                                <br><small>Per quintal</small>
                            </div>
                            <div class="price-trend trend-up">
                                ‚Çπ5,800 ‚ÜóÔ∏è
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AI Chat Section -->
            <section id="chat" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">AI Assistant - Krishi Mitra ü§ñ</h2>
                
                <div class="card">
                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="quickChat('crops')">Crop Selection</button>
                        <button class="quick-action-btn" onclick="quickChat('disease')">Disease Help</button>
                        <button class="quick-action-btn" onclick="quickChat('weather')">Weather Info</button>
                        <button class="quick-action-btn" onclick="quickChat('fertilizer')">Fertilizer</button>
                        <button class="quick-action-btn" onclick="quickChat('irrigation')">Irrigation</button>
                        <button class="quick-action-btn" onclick="quickChat('market')">Market</button>
                    </div>
                    
                    <div class="chat-container">
                        <div class="chat-messages" id="mainChat">
                            <div class="message bot">
                                <div class="message-content">
                                    Namaste Ram Singh ji! üôè Main aapka AI assistant hun. Aap mujhse Hindi, Punjabi ya English mein baat kar sakte hain. Kya madad kar sakta hun aaj?
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <button class="voice-btn" onclick="startVoiceInput()" title="Voice Input">üé§</button>
                            <input type="text" class="chat-input" placeholder="Kheti, bimari, mausam ke bare mein puchiye..." id="mainChatInput" onkeypress="handleChatEnter(event, 'mainChat')">
                            <button class="chat-send-btn" onclick="sendMessage('mainChat')" title="Send Message">‚û§</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Crop Advisory Section - IMPROVED -->
            <section id="crops" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">Crop Advisory üåæ</h2>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Crop Calendar</h3>
                            <span class="card-icon">üìÖ</span>
                        </div>
                        
                        <div class="crop-calendar">
                            <div class="calendar-header">
                                <h4>November 2023</h4>
                                <div class="calendar-nav">
                                    <button class="calendar-nav-btn" onclick="changeCalendarMonth(-1)">‚Üê</button>
                                    <button class="calendar-nav-btn" onclick="changeCalendarMonth(1)">‚Üí</button>
                                </div>
                            </div>
                            
                            <div class="calendar-grid">
                                <div class="calendar-day header">Sun</div>
                                <div class="calendar-day header">Mon</div>
                                <div class="calendar-day header">Tue</div>
                                <div class="calendar-day header">Wed</div>
                                <div class="calendar-day header">Thu</div>
                                <div class="calendar-day header">Fri</div>
                                <div class="calendar-day header">Sat</div>
                                
                                <!-- Calendar days will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="task-list">
                            <h4 style="margin: 20px 0 10px 0;">Today's Tasks</h4>
                            <div class="task-item">
                                <span class="task-icon">üíß</span>
                                <div>
                                    <strong>Irrigate Wheat Field</strong>
                                    <p>Field 1 needs watering today</p>
                                </div>
                            </div>
                            <div class="task-item">
                                <span class="task-icon">üå±</span>
                                <div>
                                    <strong>Apply Fertilizer</strong>
                                    <p>Urea application for Rice field</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Crop Recommendations</h3>
                            <span class="card-icon">üí°</span>
                        </div>
                        
                        <div class="crop-recommendation">
                            <h4>Based on your soil and location</h4>
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Wheat (Rabi Season)</strong>
                                    <span class="status-badge status-healthy">Recommended</span>
                                </div>
                                <p>Best varieties: HD-2967, PBW-550</p>
                                <p>Sowing time: Nov 1 - Nov 20</p>
                                <p>Expected yield: 45-50 quintals/acre</p>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Mustard (Rabi Season)</strong>
                                    <span class="status-badge status-healthy">Recommended</span>
                                </div>
                                <p>Best varieties: RH-749, RH-761</p>
                                <p>Sowing time: Oct 15 - Nov 10</p>
                                <p>Expected yield: 15-18 quintals/acre</p>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Potato (Rabi Season)</strong>
                                    <span class="status-badge status-warning">Moderate</span>
                                </div>
                                <p>Best varieties: Kufri Pukhraj, Kufri Jyoti</p>
                                <p>Sowing time: Oct 20 - Nov 15</p>
                                <p>Expected yield: 200-250 quintals/acre</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Crop Growth Progress</h3>
                            <span class="card-icon">üìä</span>
                        </div>
                        
                        <div class="growth-progress">
                            <div class="crop-progress">
                                <div class="detail-header">
                                    <strong>Wheat - Field 1</strong>
                                    <span>65%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%;"></div>
                                </div>
                                <p>Flowering stage - Next: Grain filling</p>
                            </div>
                            
                            <div class="crop-progress">
                                <div class="detail-header">
                                    <strong>Rice - Field 2</strong>
                                    <span>35%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 35%;"></div>
                                </div>
                                <p>Vegetative stage - Next: Tillering</p>
                            </div>
                            
                            <div class="crop-progress">
                                <div class="detail-header">
                                    <strong>Cotton - Field 3</strong>
                                    <span>85%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%;"></div>
                                </div>
                                <p>Maturity stage - Ready for harvest in 2 weeks</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Disease Scanner Section -->
            <section id="diseases" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">Disease Scanner üîç</h2>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Upload Crop Image</h3>
                            <span class="card-icon">üì∏</span>
                        </div>
                        <div class="image-upload" id="imageUpload" onclick="document.getElementById('imageInput').click()">
                            <div class="upload-icon">üì∑</div>
                            <h4>Click to upload or drag & drop</h4>
                            <p>Upload image of affected crop for AI analysis</p>
                            <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                        </div>
                        <div id="imageAnalysis" style="display: none; margin-top: 1rem;">
                            <div class="loading" id="analysisLoading"></div>
                            <span> Analyzing image...</span>
                        </div>
                        <div id="analysisResult" style="display: none; margin-top: 1rem;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Common Diseases</h3>
                            <span class="card-icon">ü¶†</span>
                        </div>
                        <div class="disease-item" onclick="showDiseaseInfo('wheat-rust')">
                            <h4>Wheat Rust</h4>
                            <p>Orange-yellow pustules on leaves and stems</p>
                        </div>
                        <div class="disease-item" onclick="showDiseaseInfo('rice-blast')">
                            <h4>Rice Blast</h4>
                            <p>Diamond-shaped lesions with gray centers</p>
                        </div>
                        <div class="disease-item" onclick="showDiseaseInfo('cotton-bollworm')">
                            <h4>Cotton Bollworm</h4>
                            <p>Holes in bolls and leaves, caterpillar damage</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Weather Section -->
            <section id="weather" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">Weather Forecast üå¶Ô∏è</h2>
                
                <div class="dashboard-grid">
                    <div class="card weather-card">
                        <h3>Current Weather</h3>
                        <div class="weather-info">
                            <div>
                                <div class="temperature">24¬∞</div>
                                <div>Partly Cloudy</div>
                                <div>Feels like 27¬∞C</div>
                            </div>
                            <div class="weather-details">
                                <div>üåÖ Sunrise: 6:45 AM</div>
                                <div>üåá Sunset: 7:20 PM</div>
                                <div>üí® Wind: 12 km/h NW</div>
                                <div>üíß Humidity: 65%</div>
                                <div>üëÅÔ∏è Visibility: 10 km</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">7-Day Forecast</h3>
                            <span class="card-icon">üìÖ</span>
                        </div>
                        <div class="forecast-item">
                            <span>Today</span>
                            <span>‚òÄÔ∏è 24¬∞/18¬∞</span>
                            <span>0% rain</span>
                        </div>
                        <div class="forecast-item">
                            <span>Tomorrow</span>
                            <span>‚õÖ 26¬∞/19¬∞</span>
                            <span>10% rain</span>
                        </div>
                        <div class="forecast-item">
                            <span>Wednesday</span>
                            <span>üåßÔ∏è 22¬∞/16¬∞</span>
                            <span>80% rain</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Farming Recommendations</h3>
                            <span class="card-icon">üí°</span>
                        </div>
                        <div class="recommendation-item">
                            <div class="rec-icon">üíß</div>
                            <div>
                                <strong>Irrigation Alert</strong>
                                <p>Light rain expected Wednesday. Reduce irrigation for wheat fields.</p>
                            </div>
                        </div>
                        <div class="recommendation-item">
                            <div class="rec-icon">üå±</div>
                            <div>
                                <strong>Spraying Advice</strong>
                                <p>Good conditions for pesticide application today and tomorrow.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Market Prices Section -->
            <section id="market" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">Market Prices üí∞</h2>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Today's Prices</h3>
                            <span class="card-icon">üìà</span>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Wheat</strong>
                                <small>Ludhiana Mandi</small>
                            </div>
                            <div class="price-trend trend-up">‚Çπ2,150 ‚ÜóÔ∏è +50</div>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Basmati Rice</strong>
                                <small>Ludhiana Mandi</small>
                            </div>
                            <div class="price-trend trend-up">‚Çπ4,200 ‚ÜóÔ∏è +100</div>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Cotton</strong>
                                <small>Bathinda Mandi</small>
                            </div>
                            <div class="price-trend trend-down">‚Çπ5,800 ‚ÜòÔ∏è -150</div>
                        </div>
                        <div class="price-item">
                            <div>
                                <strong>Sugarcane</strong>
                                <small>Jalandhar Mandi</small>
                            </div>
                            <div class="price-trend">‚Çπ350 ‚Üí +0</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Price Alerts</h3>
                            <span class="card-icon">üîî</span>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon">üü¢</div>
                            <div>
                                <strong>Wheat Price Alert</strong>
                                <p>Target price ‚Çπ2,200 - Current: ‚Çπ2,150</p>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon">üî¥</div>
                            <div>
                                <strong>Cotton Below Target</strong>
                                <p>Target price ‚Çπ6,000 - Current: ‚Çπ5,800</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Government Schemes Section -->
            <section id="schemes" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">Government Schemes üèõÔ∏è</h2>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Available Schemes</h3>
                            <span class="card-icon">üí∞</span>
                        </div>
                        <div class="scheme-item">
                            <div class="scheme-icon">üåæ</div>
                            <div class="scheme-details">
                                <h4>PM-KISAN Scheme</h4>
                                <p>‚Çπ6,000 per year in 3 equal installments</p>
                                <p class="scheme-amount">Status: Eligible</p>
                            </div>
                        </div>
                        <div class="scheme-item">
                            <div class="scheme-icon">üíß</div>
                            <div class="scheme-details">
                                <h4>Micro Irrigation Fund</h4>
                                <p>Up to 55% subsidy for drip irrigation systems</p>
                                <p class="scheme-amount">Status: Apply Now</p>
                            </div>
                        </div>
                        <div class="scheme-item">
                            <div class="scheme-icon">üå±</div>
                            <div class="scheme-details">
                                <h4>Organic Farming Scheme</h4>
                                <p>Financial assistance for organic certification</p>
                                <p class="scheme-amount">Status: Available</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Application Status</h3>
                            <span class="card-icon">üìã</span>
                        </div>
                        <div class="scheme-item">
                            <div class="scheme-icon">‚úÖ</div>
                            <div class="scheme-details">
                                <h4>PM-KISAN (12th Installment)</h4>
                                <p>Status: Approved</p>
                                <p class="scheme-amount">‚Çπ2,000 received on 15 Oct 2023</p>
                            </div>
                        </div>
                        <div class="scheme-item">
                            <div class="scheme-icon">‚è≥</div>
                            <div class="scheme-details">
                                <h4>Soil Health Card</h4>
                                <p>Status: Under Review</p>
                                <p class="scheme-amount">Expected approval: 15 days</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Profile Section - IMPROVED -->
            <section id="profile" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);">My Profile üë§</h2>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Personal Information</h3>
                            <span class="card-icon">üë§</span>
                        </div>
                        <div class="profile-info">
                            <div class="info-item">
                                <strong>Name:</strong> Ram Singh
                            </div>
                            <div class="info-item">
                                <strong>Location:</strong> Ludhiana, Punjab
                            </div>
                            <div class="info-item">
                                <strong>Phone:</strong> +91 98765 43210
                            </div>
                            <div class="info-item">
                                <strong>Farm Size:</strong> 10 acres
                            </div>
                            <div class="info-item">
                                <strong>Primary Crops:</strong> Wheat, Rice, Cotton
                            </div>
                            <div class="info-item">
                                <strong>Member Since:</strong> Jan 15, 2022
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button class="profile-btn btn-primary" onclick="editProfile()">Edit Profile</button>
                            <button class="profile-btn btn-secondary" onclick="changePassword()">Change Password</button>
                            <button class="profile-btn btn-danger" onclick="showLogoutModal()">Logout</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Farm Map</h3>
                            <span class="card-icon">üó∫Ô∏è</span>
                        </div>
                        
                        <div class="farm-map">
                            <div class="field-marker" style="top: 30%; left: 30%;" onmouseover="showFieldInfo(1)">1</div>
                            <div class="field-info" id="fieldInfo1" style="top: 30%; left: 35%;">
                                <strong>Field 1 (5 acres)</strong>
                                <p>Crop: Wheat</p>
                                <p>Stage: Flowering</p>
                            </div>
                            
                            <div class="field-marker" style="top: 60%; left: 60%;" onmouseover="showFieldInfo(2)">2</div>
                            <div class="field-info" id="fieldInfo2" style="top: 60%; left: 65%;">
                                <strong>Field 2 (3 acres)</strong>
                                <p>Crop: Rice</p>
                                <p>Stage: Vegetative</p>
                            </div>
                            
                            <div class="field-marker" style="top: 75%; left: 25%;" onmouseover="showFieldInfo(3)">3</div>
                            <div class="field-info" id="fieldInfo3" style="top: 75%; left: 30%;">
                                <strong>Field 3 (2 acres)</strong>
                                <p>Crop: Cotton</p>
                                <p>Stage: Maturity</p>
                            </div>
                            
                            <div style="color: #666; text-align: center;">
                                <p>Your Farm Layout</p>
                                <p>Click on field numbers for details</p>
                            </div>
                        </div>
                        
                        <div class="crop-details">
                            <h4 style="margin: 20px 0 10px 0;">Crop Details</h4>
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Wheat - Field 1</strong>
                                    <span class="status-badge status-healthy">Healthy</span>
                                </div>
                                <p>Variety: HD-2967 | Sown: Nov 5, 2023</p>
                                <p>Last irrigated: 3 days ago | Next irrigation: Today</p>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Rice - Field 2</strong>
                                    <span class="status-badge status-warning">Monitor</span>
                                </div>
                                <p>Variety: PR-126 | Sown: Oct 20, 2023</p>
                                <p>Last fertilized: 5 days ago | Next fertilizer: In 10 days</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Account Management</h3>
                            <span class="card-icon">‚öôÔ∏è</span>
                        </div>
                        
                        <div class="account-management">
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Subscription Status</strong>
                                    <span class="status-badge status-healthy">Active</span>
                                </div>
                                <p>Premium Plan - ‚Çπ999/year</p>
                                <p>Renewal date: Jan 15, 2024</p>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong>Data Usage</strong>
                                </div>
                                <p>Storage: 2.3GB of 5GB used</p>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 46%;"></div>
                                </div>
                            </div>
                            
                            <div class="profile-actions" style="margin-top: 20px;">
                                <button class="profile-btn btn-secondary" onclick="exportData()">Export Data</button>
                                <button class="profile-btn btn-danger" onclick="showDeactivateModal()">Deactivate Account</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Logout Modal -->
    <div class="modal" id="logoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Logout</h3>
                <button class="modal-close" onclick="closeModal('logoutModal')">√ó</button>
            </div>
            <p>Are you sure you want to logout from CropCare?</p>
            <div class="modal-buttons">
                <button class="profile-btn btn-secondary" onclick="closeModal('logoutModal')">Cancel</button>
                <button class="profile-btn btn-primary" onclick="performLogout()">Logout</button>
            </div>
        </div>
    </div>

    <!-- Deactivate Modal -->
    <div class="modal" id="deactivateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Deactivate Account</h3>
                <button class="modal-close" onclick="closeModal('deactivateModal')">√ó</button>
            </div>
            <p>Are you sure you want to deactivate your account? This action cannot be undone.</p>
            <div class="modal-buttons">
                <button class="profile-btn btn-secondary" onclick="closeModal('deactivateModal')">Cancel</button>
                <button class="profile-btn btn-danger" onclick="performDeactivation()">Deactivate</button>
            </div>
        </div>
    </div>

    <script>
        // Navigation functions 
function showSection(sectionId) {
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    document.getElementById(sectionId).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    const navItems = document.querySelectorAll('.nav-item');
    for (let item of navItems) {
        if (item.getAttribute('onclick').includes(sectionId)) {
            item.classList.add('active');
            break;
        }
    }
    if (window.innerWidth <= 768) {
        document.getElementById('sidebar').classList.remove('mobile-open');
    }
}

function toggleMobileSidebar() {
    document.getElementById('sidebar').classList.toggle('mobile-open');
}

function changeLanguage(lang) {
    showNotification(`Language changed to ${lang === 'en' ? 'English' : lang === 'hi' ? 'Hindi' : lang === 'pa' ? 'Punjabi' : 'Gujarati'}`);
}

// Chat functionality
function sendMessage(chatId) {
    const inputElement = document.getElementById(chatId === 'mainChat' ? 'mainChatInput' : 'dashboardChatInput');
    const message = inputElement.value.trim();
    if (message) {
        const messagesContainer = document.getElementById(chatId);
        const userMessage = document.createElement('div');
        userMessage.className = 'message user';
        userMessage.innerHTML = `<div class="message-content">${message}</div>`;
        messagesContainer.appendChild(userMessage);
        inputElement.value = '';
        setTimeout(() => {
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot';
            botMessage.innerHTML = `<div class="message-content">${getBotResponse(message)}</div>`;
            messagesContainer.appendChild(botMessage);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }, 1000);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
}

function handleChatEnter(event, chatId) {
    if (event.key === 'Enter') {
        sendMessage(chatId);
    }
}

function quickChat(topic) {
    const questions = {
        'weather': 'What is the weather forecast for this week?',
        'fertilizer': 'What fertilizer should I use for my wheat crop?',
        'market': 'What are the current market prices for wheat?',
        'crops': 'Which crops are best for my soil type?',
        'disease': 'How can I identify wheat rust disease?',
        'irrigation': 'How often should I irrigate my rice field?'
    };
    const messagesContainer = document.getElementById('mainChat');
    const userMessage = document.createElement('div');
    userMessage.className = 'message user';
    userMessage.innerHTML = `<div class='message-content'>${questions[topic]}</div>`;
    messagesContainer.appendChild(userMessage);
    setTimeout(() => {
        const botMessage = document.createElement('div');
        botMessage.className = 'message bot';
        botMessage.innerHTML = `<div class='message-content'>${getBotResponse(topic)}</div>`;
        messagesContainer.appendChild(botMessage);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }, 1000);
    showSection('chat');
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function getBotResponse(input) {
    const lowerInput = input.toLowerCase();
    if (lowerInput.includes('weather') || lowerInput.includes('mausam')) {
        return "This week's forecast: Mostly sunny with temperatures between 22-28¬∞C. Light rain expected on Wednesday. Good conditions for wheat flowering stage. üå§Ô∏è";
    } else if (lowerInput.includes('fertilizer') || lowerInput.includes('khad')) {
        return "For wheat at flowering stage, apply 40 kg Nitrogen per acre as Urea. Also consider Zinc supplementation if not applied earlier. Soil test recommended for precise recommendations. üåæ";
    } else if (lowerInput.includes('market') || lowerInput.includes('bhav')) {
        return "Current mandi prices: Wheat ‚Çπ2,150/quintal (‚Üë50), Basmati Rice ‚Çπ4,200/quintal (‚Üë100), Cotton ‚Çπ5,800/quintal (‚Üì150). Prices expected to rise next week. üìà";
    } else if (lowerInput.includes('crop') || lowerInput.includes('fasal')) {
        return "Based on your soil type (loam) and location (Punjab), recommended crops: Wheat, Rice, Cotton, Maize. Consider crop rotation to maintain soil health. üîÑ";
    } else if (lowerInput.includes('disease') || lowerInput.includes('bimari')) {
        return "Wheat rust appears as orange-yellow pustules on leaves. For prevention, use resistant varieties and apply fungicide at first sign. Avoid over-irrigation. ü¶†";
    } else if (lowerInput.includes('irrigation') || lowerInput.includes('sinchai')) {
        return "For wheat at flowering stage: irrigate every 7-10 days depending on soil moisture. Check soil 2 inches deep - if dry, time to irrigate. üíß";
    } else {
        return "I can help with crop advice, weather information, disease diagnosis, market prices, and government schemes. What would you like to know? üåæ";
    }
}

function startVoiceInput() {
    showNotification("Voice input activated. Speak now...");
    setTimeout(() => {
        showNotification("Voice input received: 'What is the weather forecast?'");
        quickChat('weather');
    }, 2000);
}

// Image upload functionality
function handleImageUpload(event) {
    const file = event.target.files[0];
    if (file) {
        document.getElementById('imageAnalysis').style.display = 'block';
        document.getElementById('analysisResult').style.display = 'none';
        setTimeout(() => {
            document.getElementById('imageAnalysis').style.display = 'none';
            document.getElementById('analysisResult').style.display = 'block';
            document.getElementById('analysisResult').innerHTML = `
                <h4>Analysis Result</h4>
                <div class="status-badge status-danger">Disease Detected: Wheat Rust</div>
                <p style="margin-top: 10px;">Confidence: 92%</p>
                <p><strong>Recommendations:</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>Apply fungicide containing Tebuconazole</li>
                    <li>Spray early morning or late evening</li>
                    <li>Repeat after 10 days if necessary</li>
                    <li>Avoid over-irrigation</li>
                </ul>
            `;
        }, 3000);
    }
}

function showDiseaseInfo(disease) {
    const diseaseInfo = {
        'wheat-rust': {
            name: 'Wheat Rust',
            symptoms: 'Orange-yellow pustules on leaves and stems',
            treatment: 'Apply fungicide containing Tebuconazole or Propiconazole'
        },
        'rice-blast': {
            name: 'Rice Blast',
            symptoms: 'Diamond-shaped lesions with gray centers and brown borders',
            treatment: 'Apply fungicides like Tricyclazole or Azoxystrobin'
        },
        'cotton-bollworm': {
            name: 'Cotton Bollworm',
            symptoms: 'Holes in bolls and leaves, caterpillar presence',
            treatment: 'Use biological controls like Trichogramma wasps or approved insecticides'
        }
    };
    const info = diseaseInfo[disease];
    showNotification(`${info.name}: ${info.symptoms}. Treatment: ${info.treatment}`);
}

// Crop Calendar
function generateCalendar() {
    const calendarGrid = document.querySelector('.calendar-grid');
    while (calendarGrid.children.length > 7) {
        calendarGrid.removeChild(calendarGrid.lastChild);
    }
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth();
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startDay = firstDay.getDay();
    for (let i = 0; i < startDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day';
        calendarGrid.appendChild(emptyDay);
    }
    for (let i = 1; i <= daysInMonth; i++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        if (i === today.getDate() && month === today.getMonth()) {
            dayElement.classList.add('today');
        }
        if ([5, 12, 19, 26].includes(i)) {
            dayElement.classList.add('has-task');
            dayElement.innerHTML = `${i}<br><span style="font-size:10px;">üíß</span>`;
        } else {
            dayElement.textContent = i;
        }
        calendarGrid.appendChild(dayElement);
    }
}

function changeCalendarMonth(direction) {
    showNotification(`Calendar navigation would show ${direction > 0 ? 'next' : 'previous'} month`);
    generateCalendar();
}

// Profile Section Functions
function showFieldInfo(fieldId) {
    const fieldInfo = document.getElementById(`fieldInfo${fieldId}`);
    if (fieldInfo) {
        fieldInfo.style.display = 'block';
    }
}

function editProfile() {
    showNotification("Edit profile feature would open a form to update your information");
}

function changePassword() {
    showNotification("Change password feature would open a form to update your password");
}

function exportData() {
    showNotification("Preparing your data for export...");
    setTimeout(() => {
        showNotification("Your farm data has been exported successfully!");
    }, 2000);
}

// Modal Functions
function showLogoutModal() {
    document.getElementById('logoutModal').style.display = 'flex';
}

function showDeactivateModal() {
    document.getElementById('deactivateModal').style.display = 'flex';
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none';
}

function performLogout() {
    showNotification("Logging out...");
    closeModal('logoutModal');
    setTimeout(() => {
        // Clear login state
        localStorage.removeItem("isLoggedIn");
        sessionStorage.removeItem("isLoggedIn");
        // Redirect to login page
        window.location.replace("index.html");
    }, 1000);
}

function performDeactivation() {
    showNotification("Deactivating your account...");
    closeModal('deactivateModal');
    setTimeout(() => {
        alert("Your account has been deactivated. We're sorry to see you go!");
    }, 1500);
}

// Notification system
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.innerHTML = message;
    document.body.appendChild(notification);
    setTimeout(() => {
        notification.classList.add('show');
    }, 100);
    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            document.body.removeChild(notification);
        }, 300);
    }, 5000);
}

// Initialize the app
document.addEventListener('DOMContentLoaded', function() {
    // Check login state first
    const isLoggedIn =
        localStorage.getItem("isLoggedIn") === "true" ||
        sessionStorage.getItem("isLoggedIn") === "true";
    if (!isLoggedIn) {
        window.location.replace("index.html");
        return;
    }
    const imageUpload = document.getElementById('imageUpload');
    imageUpload.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.classList.add('dragover');
    });
    imageUpload.addEventListener('dragleave', function() {
        this.classList.remove('dragover');
    });
    imageUpload.addEventListener('drop', function(e) {
        e.preventDefault();
        this.classList.remove('dragover');
        if (e.dataTransfer.files.length) {
            document.getElementById('imageInput').files = e.dataTransfer.files;
            handleImageUpload({target: {files: e.dataTransfer.files}});
        }
    });
    generateCalendar();
    setTimeout(() => {
        showNotification("Welcome to CropCare! How can I help with your farming today? üåæ");
    }, 1000);
});
    </script>
</body>

</html>
